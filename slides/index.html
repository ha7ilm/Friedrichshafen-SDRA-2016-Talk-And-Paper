<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Recent work on OpenWebRX and csdr</title>

		<meta name="description" content="SDRA-2016 Presentation on OpenWebRX">
		<meta name="author" content="AndrÃ¡s Retzler">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css" id="theme">
		<link rel="stylesheet" href="lib/font/dejavusansmono_book_macroman/stylesheet.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
		<style>
		 .reveal section img.noborder {
			border:none;
			background: none;
			box-shadow: none;
		}
		.reveal .slides section .fragment.fade-in-reldown { opacity: 0; visibility: hidden; top: -100px; relative: relative; }
		.reveal .slides section .fragment.fade-in-reldown.visible { opacity: 1; visibility: visible; top: 0px; position: relative; }
		.reveal .slides section .fragment.fade-in-up { opacity: 0; visibility: hidden; top: 100px; position: absolute; }
		.reveal .slides section .fragment.fade-in-up.visible { opacity: 1; visibility: visible; top: 0px; position: absolute; }
		.above-each-other {  width: 80%; position: absolute; top:0; left: 95px; }
		.80p { width: 805; }
		.reveal .slides section .fragment.go-right { position: relative; left: -100px; visibility: visible; opacity: 1;}
		.reveal .slides section .fragment.go-right.visible { position: relative; left: 0px; }
		.reveal .slides section .fragment.go-left { position: relative; left: 255px; visibility: visible; opacity: 1;}
		.reveal .slides section .fragment.go-left.visible { position: relative; left: 0px; }
		.code-above-each-other { width: 100%; position: absolute; top: 0px; left: 0px; }
		.code-above-each-other pre { width: 100%; }
		p.license-reference { color: #aaa; font-size: 12pt; }
		.license-reference a { color: #888; }

		.reveal pre { font-family: dejavu_sans_monobook; }
		.reveal code { font-family: dejavu_sans_monobook; }

		.reveal a { color: #184796; }

		.youtube-in-corner iframe {
			position: fixed;
			left: 15px;
			bottom: 15px;
		}

		</style>

	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides" >
				<section data-background="bgtest1notree.jpg">
					<img src="fr2-slide-2.png" class="noborder" style="position: relative; top: 20px;">
				</section>
				<!--<section data-background="bglake.jpg">
					<img src="fr2-old-owx-screenshot.png" class="noborder" style="width: 90%;" />
				</section>-->
				<section data-background="bglake.jpg" style="width: 114%; left: -7%;">
					<video autoplay controls>
						<source data-src="clip1.webm" type="video/webm" />
					</video>
				</section>
				<section data-background="bglake.jpg" data-transition="fade-in">
					<div style="text-align: left; padding-left: 50px;">
					<span><img class="noborder" src="bp1.png" style="width: 159px; border-style: none;"/><h1 style="font-size: 40pt; display: inline; position: relative; top: -75px; left: 25px;">Audio compression</h1><br /></span>
					<span class="fragment fade-up"><img class="noborder" src="bp2.png" style="width: 159px; border-style: none;"/><h1 style="font-size: 40pt; display: inline; position: relative; top: -75px; left: 25px;">DSP acceleration</h1><br /></span>
					<span class="fragment fade-up"><img class="noborder" src="bp3.png" style="width: 159px; border-style: none;"/><h1 style="font-size: 40pt; display: inline; position: relative; top: -75px; left: 25px;">Website</h1></span>
					</div>
				</section>
				<section data-background="bglake.jpg" >
					<h1 data-smallcaps style="font-size: 50pt;">Audio compression: ADPCM</h1>
					<img style="background-color: White; border-style: none; width: 80%;" src="sdrjs-bwchange-2.png" />
				</section>
				<section data-background="bglake.jpg" >
					<h1 data-smallcaps style="font-size: 50pt;">Website for receivers</h1>
					<img class="noborder" style="width: 63%;" src="sdrhu3.png" />
				</section>
				<section data-background="bglake.jpg" >
					<img class="noborder" style="width: 100%;" src="sdrhumap.png" />
				</section>
				<section data-background="bglake.jpg" >
					<img class="noborder" style="width: 100%;" src="sdrhureg.png" />
				</section>
				<!--<section data-background="bglake.jpg" >
					<img class="noborder" style="width: 100%;" src="openwebrx-hamsat.png" />
				</section>-->
				<section data-background="bglake.jpg" >
					<h1 data-smallcaps style="font-size: 50pt;">DSP acceleration</h1>
				</section>
				<section data-background="bglake.jpg" >
					<h1 data-smallcaps style="font-size: 59pt;">csdr</h1>
				</section>
				<section data-background="bglake.jpg" data-transition="fade">
					<h1 data-smallcaps style="font-size: 59pt;">csdr</h1>
					<pre style="width: 100%; margin-top: 40px;"><code>#!/bin/bash
rtl_sdr -s 2400000 -f 89300000 -g 20 -





					</code></pre>
					<img class="noborder" src="csdr-cmd-1.png" style="width: 100%; position: relative; left: 45px;" />
				</section>
				<section data-background="bglake.jpg" data-transition="fade">
					<h1 data-smallcaps style="font-size: 59pt;">csdr</h1>
					<pre style="width: 100%; margin-top: 40px;"><code>#!/bin/bash
rtl_sdr -s 2400000 -f 89300000 -g 20 - | csdr convert_u8_f





					</code></pre>
					<img class="noborder" src="csdr-cmd-2.png" style="width: 100%; position: relative; left: 45px;" />
				</section>
				<section data-background="bglake.jpg" data-transition="fade">
					<h1 data-smallcaps style="font-size: 59pt;">csdr</h1>
					<pre style="width: 100%; margin-top: 40px;"><code>#!/bin/bash
rtl_sdr -s 2400000 -f 89300000 -g 20 - | csdr convert_u8_f | \
csdr shift_addition_cc -0.085




					</code></pre>
					<img class="noborder" src="csdr-cmd-3.png" style="width: 100%; position: relative; left: 45px;" />
				</section>
				<section data-background="bglake.jpg" data-transition="fade">
					<h1 data-smallcaps style="font-size: 59pt;">csdr</h1>
					<pre style="width: 100%; margin-top: 40px;"><code>#!/bin/bash
rtl_sdr -s 2400000 -f 89300000 -g 20 - | csdr convert_u8_f | \
csdr shift_addition_cc -0.085 | csdr fir_decimate_cc 10 0.05 HAMMING




					</code></pre>
					<img class="noborder" src="csdr-cmd-4.png" style="width: 100%; position: relative; left: 45px;" />
				</section>
				<section data-background="bglake.jpg" data-transition="fade">
					<h1 data-smallcaps style="font-size: 59pt;">csdr</h1>
					<pre style="width: 100%; margin-top: 40px;"><code>#!/bin/bash
rtl_sdr -s 2400000 -f 89300000 -g 20 - | csdr convert_u8_f | \
csdr shift_addition_cc -0.085 | csdr fir_decimate_cc 10 0.05 HAMMING | \
csdr fmdemod_quadri_cf



					</code></pre>
					<img class="noborder" src="csdr-cmd-5.png" style="width: 100%; position: relative; left: 45px;" />
				</section>
				<section data-background="bglake.jpg" data-transition="fade-in">
					<h1 data-smallcaps style="font-size: 59pt;">csdr</h1>
					<pre style="width: 100%; margin-top: 40px;"><code>#!/bin/bash
rtl_sdr -s 2400000 -f 89300000 -g 20 - | csdr convert_u8_f | \
csdr shift_addition_cc -0.085 | csdr fir_decimate_cc 10 0.05 HAMMING | \
csdr fmdemod_quadri_cf | csdr fractional_decimator_ff 5 | \
csdr deemphasis_wfm_ff 48000 50e-6 | csdr convert_f_s16 | \
mplayer -rawaudio samplesize=2:channels=1:rate=48000 \
-cache 1024 -quiet -demuxer rawaudio -
					</code></pre>
					<img class="noborder" src="csdr-cmd-7.png" style="width: 100%;" />
				</section>



				<section data-background="bglake.jpg" >
					<h1 data-smallcaps style="font-size: 50pt;">Signal path</h1>
					<img class="noborder" src="highbw3.png" />
				</section>
				<section data-background="bglake.jpg" >
					<h1 data-smallcaps style="font-size: 50pt;">Digital downconverter</h1>
				</section>
				<section data-transition="fade-out">
					<img class="noborder" src="ddc-1-b.png" style="height: 659px;" />
				</section>
				<section data-transition="fade-in">
					<img class="noborder" src="ddc2.png" style="height: 659px;" />
				</section>
				<section data-transition="fade-in">
					<img class="noborder" src="ddc2highlight.png" style="height: 659px;" />
				</section>
				<!--<section>
					<img class="noborder" src="ddc-fg-1.png" />
				</section>-->
				<!--<section data-background="bglake.jpg" data-transition="fade-in">
					<h1 data-smallcaps style="font-size: 50pt;">ADPCM codec</h1>
						<div style="font-family: monospace;">csdr encode_ima_adpcm_s16_u8</div><br/>
						<div style="font-family: monospace;">csdr decode_ima_adpcm_u8_s16</div>
				</section>-->
				<!--<section data-background="bglake.jpg" data-transition="fade-in">
					<span data-smallcaps style="font-size: 50pt; font-family: monospace;">csdr fir_decimate_cc</span>
				</section>-->
				<section>
					<img src="ddc-select.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">Simple C version</div>
					<img src="firdec-source.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">Simple C version</div>
					<img src="n-firdec-1.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">Simple C version</div>
					<img src="n-firdec-2.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">Simple C version</div>
					<img src="n-firdec-3.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<img src="firdec-stepscount.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">NEON SIMD</div>
					<div style="font-size: 40pt; color: #777;">(Inline assembly)</span>
					<img src="firasm-source.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">NEON SIMD</div>
					<img src="n-firasm-1.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">NEON SIMD</div>
					<img src="n-firasm-2.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">NEON SIMD</div>
					<img src="n-firasm-3.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">NEON SIMD</div>
					<img src="n-firasm-4.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">NEON SIMD</div>
					<img src="n-firasm-5.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">NEON SIMD</div>
					<img src="n-firasm-7.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">NEON SIMD</div>
					<img src="n-firasm-8.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<img src="firasm-stepcount.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">GPGPU (CUDA)</div>
					<img src="firgpu-source.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">GPGPU (CUDA)</div>
					<img src="n-firgpu-1.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">GPGPU (CUDA)</div>
					<img src="n-firgpu-2.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<div style="font-size: 50pt;">GPGPU (CUDA)</div>
					<img src="n-firgpu-3.png" class="noborder" />
				</section>
				<section data-transition="fade-in">
					<span style="font-size: 73pt;">2122ms &rarr; 113ms</span><br/><br/>
					<span style="font-size: 73pt;">Ã18.7 speedup</span>
				</section>
				<section data-transition="fade-in">
					<span style="font-size: 45pt;">Mark Borgerding, &quot;Turning Overlap-Save into a Multiband
Mixing, Downsampling Filter Bank&quot;,<br /><em>IEEE Signal Processing Magazine</em>, March 2006</span><br/><br/>
				</section>
				<section data-transition="fade-in">
					<img src="gitbranch1b.png" class="noborder" style="width: 100%;"/>
				</section>
				<section data-transition="fade-in">
					<img src="gitbranch2b.png" class="noborder" style="width: 100%;"/>
				</section>
				<section data-transition="fade-in"> <img src="fastddc-1.png"  class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-2.png"  class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-3.png"  class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-4.png"  class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-5.png"  class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-6.png"  class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-7.png"  class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-8.png"  class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-9.png"  class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-10.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-11.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-12.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-13.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-14.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-15.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-16.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-17.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-18.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-19.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-20.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-21.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-22.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-23.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-24.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-25.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-26.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-27.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-28.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-29.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-30.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-31.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-32.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-33.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-34.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-35.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-36.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-37.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-38.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-39.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-40.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="fade-in"> <img src="fastddc-41.png" class="noborder" style="width: 100%; position: relative; top: -30px;"/> </section>
				<section data-transition="">
					<span style="font-size: 73pt;">Various other things</span>
				</section>
				<section data-background="bglake.jpg" >
					<div style="text-align: left; padding-left: 50px;">
					<span class=""><img class="noborder" src="bp4.png" style="width: 159px; border-style: none;"/><h1 style="font-size: 40pt; display: inline; position: relative; top: -75px; left: 25px;">Digital modes</h1><br /></span>
					<span class="fragment fade-right"><img class="noborder" src="bp5.png" style="width: 159px; border-style: none;"/><h1 style="font-size: 40pt; display: inline; position: relative; top: -75px; left: 25px;">Hardware support</h1><br /></span>
					<span class="fragment fade-right"><img class="noborder" src="bp7.png" style="width: 159px; border-style: none;"/><h1 style="font-size: 40pt; display: inline; position: relative; top: -75px; left: 25px;">qtcsdr</h1></span>
					</div>
				</section>
				<section data-background="bglake.jpg">
					<h1 data-smallcaps style="font-size: 50pt;">Digital modes: RTTY</h1>
					<img src="csdr-rtty.png" class="noborder"/>
				</section>
				<section data-background="bglake.jpg">
					<h1 data-smallcaps style="font-size: 50pt;">Hardware support</h1>
					<!--<img src="config_webrx_start.png" class="noborder" style="width: 100%;"/>-->
					<span style="font-size: 40pt;">HackRF, AFEDRI SDR, SDRPlay,<br /> gr-osmosdr, etc.</span>
				</section>
				<section data-background="bglake.jpg">
					<h1>hpsdrtool</h1>
					<pre><code class="nohighlight">â  ~ hpsdrtool
hpsdrtool &lt;hpsdr_metis_ip&gt; [--freq &lt;freq_in_hz&gt;]
	[--preamp] [--no-iq-output]
</code></pre>
					<img class="fragment noborder" src="hpsdr-hw.jpg" style="height: 400px;"/>
					<!-- Metis & Mercury -->
				</section>
				<section data-background="bglake.jpg">
					<img src="hpsdr1.png" class="noborder" style="width: 100%;"/>
				</section>
				<section data-background="bglake.jpg" data-transition="fade-in">
					<img src="hpsdr2.png" class="noborder" style="width: 100%;"/>
				</section>
				<section data-background="bglake.jpg">
					<a href="https://github.com/ha7ilm/hpsdrtool" style="text-shadow: #fff 0px 0px 15px; font-size: 40pt;">https://github.com/ha7ilm/hpsdrtool</a>
				</section>
				<section data-background="bglake.jpg">
					<h1 style="font-size: 70pt; display: inline; position: relative; top: -75px; left: 25px;">qtcsdr</h1>
				</section>
				<section data-background="bglake.jpg" data-transition="fade-in">
					<img class="noborder" src="pifm1.png" style="width: 100%;"/>
				</section>
				<section data-background="bglake.jpg" data-transition="fade-in">
					<img class="noborder" src="pifm2.png" style="width: 100%;"/>
				</section>
				<section data-background="bglake.jpg" data-transition="fade-in">
					<h1 style="font-size: 50pt;">Software (CLI)</h1>
					<ul>
						<li><b>WsprryPi</b>: a WSPR beacon<br />
							<a href="https://github.com/JamesP6000/WsprryPi" style="text-shadow: #fff 0px 0px 15px; font-size: 25pt;">https://github.com/JamesP6000/WsprryPi</a><br/><br/>
						</li>
						<li><b>RPITX</b>: transmit an I/Q signal<br />
							<a href="https://github.com/F5OEO/rpitx" style="text-shadow: #fff 0px 0px 15px; font-size: 25pt;">https://github.com/F5OEO/rpitx</a>
						</li>
					</ul>
				</section>

				<section data-background="bglake.jpg">
					<h1 style="font-size: 50pt;">QRPi</h1>
					<a href="https://www.tapr.org/kits_20M-wspr-pi.html" style="text-shadow: #fff 0px 0px 15px; font-size: 25pt;">https://www.tapr.org/kits_20M-wspr-pi.html</a>
					<img class="noborder" src="qrpi.jpg" style="width: 100%;"/>
				</section>

			</section>
			<section data-background="bglake.jpg">
				<h1 style="font-size: 50pt;">qtcsdr</h1>
				<span style="font-size: 40pt;">RTL-SDR + RPITX = transceiver</span><br/><br/>
				<img class="noborder" src="qtcsdr-1.png" />
			</section>
			<section data-transition="fade-in">
				<h1 style="font-size: 50pt;">qtcsdr (RX)</h1>
				<img class="noborder" src="rpi-qtcsdr-2.png" style="width: 100%;"/>
			</section>
			<section data-transition="fade-in">
				<h1 style="font-size: 50pt;">qtcsdr (TX)</h1>
				<img class="noborder" src="rpi-qtcsdr-1.png" style="width: 100%;"/>
			</section>
			<section data-transition="fade-in">
				<h1 style="font-size: 70pt;">qtcsdr</h1>
				<a href="https://github.com/ha7ilm/qtcsdr" style="text-shadow: #fff 0px 0px 15px; font-size: 40pt;">https://github.com/ha7ilm/qtcsdr</a><br/><br/>
				<!--<span style="font-size: 40pt;">&lt; 500 lines</span><br/><br/>-->
				<img class="noborder" src="qtcsdr-1.png" />
			</section>

				<!--<section  data-background="background.png">
					<h1 data-smallcaps>Acknowledgement</h1><br />
					<ul>
						<p style="font-size: 53pt; font-weight: bold; text-shadow: 0px 0px 10px #fff;" >JÃ¡nos Selmeczi, PhD (HA5FT)</p>
						<p style="font-size: 53pt; font-weight: bold; text-shadow: 0px 0px 10px #fff;" >PÃ©ter HorvÃ¡th, PhD (HA5CQA)</p>
					</ul>
				</section>-->
				<section  data-background="bglake.jpg" data-transition="fade-in">
					<img class="noborder" src="sdrhu-logo-main-wb.png">
				</section>
			</div>

		</div>



		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				zoomKey: 'ctrl',
				viewDistance: 10,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>
		<script src="js/jquery-1.11.3.min.js"></script>
		<script>
			Reveal.addEventListener( 'ready', function( event ) {
				$("*[data-smallcaps]").each(function(x,y){
					$(y).html( $(y).text().replace(/[A-Z]+/g,function(x){return "<span style='font-size: 125%;'>"+x+"</span>";} ));
				});
			} );

			$("video").click(function(e){
			    this.currentTime = 0; this.play(); console.log("video::clicked");
			});

		</script>

		<div class="youtube-in-corner">
			<div id="youtube-in-corner-player"></div>
			<!--<iframe width="200" height="112" src="https://www.youtube.com/embed/fgFto-Oj-uw" frameborder="0" allowfullscreen></iframe>-->
		</div>


<script>

  //parameters
  var ytplayer;
  var ytplayerWidth = 300;
  var ytplayerHeight = 168;
  var AUTOSTART = { ALWAYS: 1, NEVER: 0, ONLY_ON_FIRST_SLIDE: 2 };
  var ytplayerAutoStartBehaviour = AUTOSTART.NEVER;

  var disableYTSeek = false;
  var disableRevealSeekTimeouts = 0;
  var disableSlideChanged = false;
  var videoAlreadyStarted = false;


  var slideTimeMap =
  [
	{ time: 0,   slide: [0, 0,-1]  },
	{ time: 32,  slide: [1, 0,-1]  },
	{ time: 78,  slide: [2, 0,-1]  },
	{ time: 82,  slide: [2, 0, 0]  },
	{ time: 84,  slide: [2, 0, 1]  },
	{ time: 94,  slide: [3, 0, -1] },
	{ time: 115, slide: [4, 0, -1] },
	{ time: 127, slide: [5, 0, -1] },
	{ time: 136, slide: [6, 0, -1] },
	{ time: 141, slide: [7, 0, -1] },
	{ time: 173, slide: [8, 0, -1] },
	{ time: 190, slide: [9, 0, -1] },
	{ time: 199, slide: [10, 0, -1] },
	{ time: 206, slide: [11, 0, -1] },
	{ time: 210, slide: [12, 0, -1] },
	{ time: 213, slide: [13, 0, -1] },
	{ time: 215, slide: [14, 0, -1] },
	{ time: 224, slide: [15, 0, -1] },
	{ time: 237, slide: [16, 0, -1] },
	{ time: 243, slide: [17, 0, -1] },
	{ time: 260, slide: [18, 0, -1] },
	{ time: 268, slide: [19, 0, -1] },
	{ time: 276, slide: [20, 0, -1] },
	{ time: 351.33-0.5, slide: [ 21,0,-1] },
	{ time: 358.34-0.5, slide: [ 22,0,-1] },
	{ time: 360.33-0.5, slide: [ 23,0,-1] },
	{ time: 362.34-0.5, slide: [ 24,0,-1] },
	{ time: 370.08-0.5, slide: [ 25,0,-1] },
	{ time: 375.08-0.5, slide: [ 26,0,-1] },
	{ time: 407.08-0.5, slide: [ 27,0,-1] },
	{ time: 417.08-0.5, slide: [ 28,0,-1] },
	{ time: 422.01-0.5, slide: [ 28,0,-1] },
	{ time: 437.02-0.5, slide: [ 29,0,-1] },
	{ time: 439.00-0.5, slide: [ 30,0,-1] },
	{ time: 440.02-0.5, slide: [ 30,0,-1] },
	{ time: 441.00-0.5, slide: [ 34,0,-1] },
	{ time: 450.01-0.5, slide: [ 35,0,-1] },
	{ time: 464.01-0.5, slide: [ 36,0,-1] },
	{ time: 492.01-0.5, slide: [ 37,0,-1] },
	{ time: 497.02-0.5, slide: [ 38,0,-1] },
	{ time: 504.02-0.5, slide: [ 39,0,-1] },
	{ time: 524.01-0.5, slide: [ 40,0,-1] },
	{ time: 542.01-0.5, slide: [ 41,0,-1] },
	{ time: 556.01-0.5, slide: [ 42,0,-1] },
	{ time: 559.00-0.5, slide: [ 43,0,-1] },
	{ time: 561.02-0.5, slide: [ 44,0,-1] },
	{ time: 562.01-0.5, slide: [ 45,0,-1] },
	{ time: 563.99-0.5, slide: [ 46,0,-1] },
	{ time: 566.01-0.5, slide: [ 47,0,-1] },
	{ time: 569.01-0.5, slide: [ 48,0,-1] },
	{ time: 575.01-0.5, slide: [ 49,0,-1] },
	{ time: 578.99-0.5, slide: [ 50,0,-1] },
	{ time: 583.02-0.5, slide: [ 51,0,-1] },
	{ time: 592.98-0.5, slide: [ 52,0,-1] },
	{ time: 597.02-0.5, slide: [ 53,0,-1] },
	{ time: 602.01-0.5, slide: [ 54,0,-1] },
	{ time: 604.99-0.5, slide: [ 55,0,-1] },
	{ time: 606.02-0.5, slide: [ 56,0,-1] },
	{ time: 607.01-0.5, slide: [ 57,0,-1] },
	{ time: 609.99-0.5, slide: [ 58,0,-1] },
	{ time: 611.98-0.5, slide: [ 59,0,-1] },
	{ time: 616.02-0.5, slide: [ 60,0,-1] },
	{ time: 622.00-0.5, slide: [ 61,0,-1] },
	{ time: 623.99-0.5, slide: [ 62,0,-1] },
	{ time: 628.00-0.5, slide: [ 63,0,-1] },
	{ time: 630.00-0.5, slide: [ 64,0,-1] },
	{ time: 631.01-0.5, slide: [ 65,0,-1] },
	{ time: 632.01-0.5, slide: [ 66,0,-1] },
	{ time: 663.02-0.5, slide: [ 67,0,-1] },
	{ time: 667.02-0.5, slide: [ 68,0,-1] },
	{ time: 670.00-0.5, slide: [ 69,0,-1] },
	{ time: 671.01-0.5, slide: [ 70,0,-1] },
	{ time: 675.00-0.5, slide: [ 71,0,-1] },
	{ time: 681.01-0.5, slide: [ 72,0,-1] },
	{ time: 682.00-0.5, slide: [ 73,0,-1] },
	{ time: 697.00-0.5, slide: [ 74,0,-1] },
	{ time: 728.01-0.5, slide: [ 75,0,-1] },
	{ time: 743.01-0.5, slide: [ 76,0,-1] },
	{ time: 749.00-0.5, slide: [ 77,0,-1] },
	{ time: 750.00-0.5, slide: [ 78,0,-1] },
	{ time: 750.99-0.5, slide: [ 79,0,-1] },
	{ time: 752.01-0.5, slide: [ 80,0,-1] },
	{ time: 762.00-0.5, slide: [ 81,0,-1] },
	{ time: 796.99-0.5, slide: [ 82,0,-1] },
	{ time: 832.01-0.5, slide: [ 83,0,-1] },
	{ time: 835.00-0.5, slide: [ 84,0,-1] },
	{ time: 850.98-0.5, slide: [ 85,0,-1] },
	{ time: 852.01-0.5, slide: [ 86,0,-1] },
	{ time: 858.98-0.5, slide: [ 87,0,-1] },
	{ time: 865.01-0.5, slide: [ 88,0,-1] },
	{ time: 877.98-0.5, slide: [ 89,0,-1] },
	{ time: 895.99-0.5, slide: [ 90,0,-1] },
	{ time: 914.00-0.5, slide: [ 91,0,-1] },
	{ time: 936.01-0.5, slide: [ 92,0,-1] },
	{ time: 947.00-0.5, slide: [ 93,0,-1] },
	{ time: 959.00-0.5, slide: [ 94,0,-1] },
	{ time: 966.98-0.5, slide: [ 95,0,-1] },
	{ time: 992.98-0.5, slide: [ 96,0,-1] },
  ]

  var newSlideTimeMap = [];

  var ytPlayerCurrentSlideIndex = 0;

  Reveal.addEventListener( 'slidechanged', ( event ) => {
    // event.previousSlide, event.currentSlide, event.indexh, event.indexv
	if(disableSlideChanged) return;
	goToSlideInYT(event.indexh,event.indexv);
  } );

  function goToSlideInYT(indexh, indexv)
  {
	  console.trace();
	if(disableYTSeek) return;
    slideTimeMap.forEach( (x)=>{
  		if(x.slide[0]==indexh && x.slide[1]==indexv && x.slide[2]==-1 )
		{
			console.log("goToSlideInYT, YT => : ", x );
			ytplayer.seekTo(x.time);
			if(!videoAlreadyStarted && ytplayerAutoStartBehaviour != AUTOSTART.ALWAYS) ytplayer.pauseVideo();
			disableRevealSeekTimeouts = 3;
			goToCurrentSlideInReveal(true, x.time);
			//console.log("it is", ytPlayerCurrentSlideIndex, ytplayer.getCurrentTime(), x.time);
		}
  	});
  }

  function goToCurrentSlideInReveal(onlyUpdateIndex, currentYtTime) //second parameter is needed because when the video is seeked, it does not update ytplayer.getCurrentTime right then
  {
	onlyUpdateIndex = (onlyUpdateIndex == undefined) ? false : onlyUpdateIndex;
	currentYtTime = (currentYtTime == undefined) ? ytplayer.getCurrentTime() : currentYtTime;
	var revealSlideNow = 0; //what if it is the first slide
    for(var i=0;i<slideTimeMap.length-1;i++)
		if(currentYtTime >= slideTimeMap[i].time && currentYtTime <= slideTimeMap[i+1].time)
			revealSlideNow=i;
	if(currentYtTime >= slideTimeMap[slideTimeMap.length-1].time) revealSlideNow = slideTimeMap.length-1;
	if(!onlyUpdateIndex && ytPlayerCurrentSlideIndex!=revealSlideNow) //we only change slides if the video runs on the edge between timeframes defined in slideTimeMap.
	{
		console.log("goToCurrentSlideInReveal, Reveal => ", slideTimeMap[revealSlideNow] );
		//console.log("sic ", ytPlayerCurrentSlideIndex, revealSlideNow );
		disableSlideChanged = true;
		Reveal.slide.apply(this, slideTimeMap[revealSlideNow].slide);
		disableSlideChanged = false;
	}
	ytPlayerCurrentSlideIndex=revealSlideNow;
	//if(onlyUpdateIndex) console.log("sup ", ytPlayerCurrentSlideIndex );
  }

  // This code loads the IFrame Player API code asynchronously.
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // This function creates an <iframe> (and YouTube player) the API code downloads.
  function onYouTubeIframeAPIReady() {
	ytplayer = new YT.Player('youtube-in-corner-player', {
	  width: ytplayerWidth.toString(),
	  height: ytplayerHeight.toString(),
	  videoId: 'fgFto-Oj-uw',
	  events: {
		'onReady': onPlayerReady,
		'onStateChange': () => {goToCurrentSlideInReveal();} //function inside does not have event argument
	  }
	});
	ytWindowResize();
  }

  function onPlayerReady(event) {
	  //We start playback when the video is loaded and we are on the first slide
	  //else we wait for the user to start the video playback.
	  if(Reveal.getState().indexh==0 && Reveal.getState().indexv==0)
	  {
		  if(ytplayerAutoStartBehaviour != AUTOSTART.NEVER) event.target.playVideo();
	  }
	  else goToSlideInYT(Reveal.getState().indexh,Reveal.getState().indexv);

	  //We will check the Youtube player every 100ms and change slides accordingly
	  window.setInterval(()=>{
		  if(disableRevealSeekTimeouts) { disableRevealSeekTimeouts--; return; }
		  if(ytplayer.getPlayerState()!=YT.PlayerState.PLAYING) return;
		  videoAlreadyStarted = true;
		  //console.log(ytplayer.getCurrentTime());
		  disableYTSeek = true;
		  goToCurrentSlideInReveal();
		  disableYTSeek = false;
	  }, 100);
  }

  function recordSlideChange()
  {
	  newMap = {
		  time: ytplayer.getCurrentTime(),
		  slide: [Reveal.getState().indexh,Reveal.getState().indexv,((frag=Reveal.getState().indexf)==undefined)?-1:frag]
	  };
	  console.log("recordSlideChange, newSlideTimeMap => ",newMap);
	  newSlideTimeMap.push(newMap);
  }

  function printNewSlideTimeMap()
  {
	  outStr="slideTimeMap = [\n";
	  newSlideTimeMap.forEach((x)=>{outStr+=`\t\{ time: ${x.time.toFixed(2)}, slide: [ ${x.slide[0]}, ${x.slide[1]}, ${x.slide[2]}] \}\n`;});
	  outStr+="];\n";
	  console.log(outStr);
	  return(outStr);
  }

	function ytWindowResize()
	{
		if(document.body.clientWidth<ytplayerWidth*2 || document.body.clientHeight<ytplayerHeight*2) { ytplayer.getIframe().style.display="none"; }
  		else if(ytplayer.getIframe().style.display) ytplayer.getIframe().style.display="";
	}

	$(window).keypress((event)=>{if(event.which=="r".charCodeAt(0)){ recordSlideChange(); }});
	$(window).resize(ytWindowResize);
	$(window).load();

</script>


	</body>
</html>
